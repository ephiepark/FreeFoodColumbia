import reimport feedparserfrom datetime import datetimefrom models import Eventurltoscrape = 'http://bwog.com/tag/free-food/feed/'right = "no"ColumbiaBuildings = ['Lerner', 'Butler', 'John Jay', 'Carmen', 'Hartley', 'Wallach',            'Hamilton', 'Furnald', 'Mcbain', 'Broadway', 'Schapiro', 'Ruggles',            'Hogan', 'Watt', 'EC', 'East Campus', 'Journalism', 'Kent', 'Dodge',            'Philosophy', 'Maison Francaise', 'Buell', 'Lewisohn', 'Mathematics',            'Math', 'Pupin', 'Northwest Corner', 'NoCo', 'Noco', 'Mudd', 'Schermerhorn',            'Avery', 'Fayerweather', 'Havemeyer', 'Uris', 'Wien', 'Woodbridge', 'River',            'Fitness Center', 'Low Plaza', 'Furnald Lawn', 'Teacher\'s College',            'Low Library', 'SIPA', 'International Affairs', 'Law School', 'Casa Italiana',            'Casa Hispanica', 'Earl', 'Barnard', 'Diana', 'Vag', 'Hewitt', 'Altschul',            'Claremont', 'College Walk', 'Van Am Quad']d = feedparser.parse(urltoscrape)for entry in d.entries:	if "Scroungers Anonymous" not in entry.title:		place = ""		timeof = ""		gottime = "no"		gotplace = "no"		data = entry.content[0]['value']		data = data.encode("utf-8")		match = re.findall(r'<strong>(.*?)</strong>', data)		if match:			for item in match:				test = re.search(r'\d[\d:\s\w]+[ap]m', item)				if test:					time = test.group()					timeof = time					gottime = "yes"				for word in ColumbiaBuildings:					if word in item:						location = word						x = re.search(r'\d*\s*'+location+ r'\s*\d*', item)						if x: place = x.group()						else: place = location						gotplace = "yes"									print "\n"		if gottime == "no":			test = re.search(r'\d[\d:\s\w]+[ap]m', data)			if test:				time = test.group()				timeof = time				gottime = "yes"		if gotplace == "no":			for word in ColumbiaBuildings:				if word in data:					location = word						x = re.search(r'\d*\s*'+location+ r'\s*\d*', data)					if x: place = x.group()					else: place = location					gotplace = "yes"					break		if gottime == "yes" and gotplace == "yes":			print entry.title.encode("utf-8")			print entry.date[0:16]			print "Place is " + place			print "Time is " + timeof			e = Event(date = entry.date[0:16]+" at " + timeof, location = place, description = entry.title.encode("utf-8"), source = entry.link)			e.save()			